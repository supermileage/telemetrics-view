(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,t,a){},235:function(e,t,a){},79:function(e,t,a){e.exports=a(80)},80:function(e,t,a){"use strict";a.r(t);var n=a(78),r=a(34),o=a(46),s=a(36),i=a(35),l=a(37),c=a(1),p=a.n(c),d=a(22),u=a.n(d),h=a(71),m=a(48),g=a(76),b=a.n(g),f=a(77),E=a.n(f),v=(a(233),a(234),a(235),{labels:[],datasets:[{label:"Datapoints",fill:!0,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[]}]}),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleChangeStart=function(e){a.setState({startTime:e})},a.handleChangeEnd=function(e){a.setState({endTime:e})},a.handleCurrent=function(e){console.log(e),e.target.checked?(a.setState({current:!0,endTime:null}),a.interval=setInterval(function(){return a.getData()},1500)):(a.setState({current:!1}),clearInterval(a.interval),a.handleChangeEnd(new Date))},a.getData=function(){fetch("https://datastore.googleapis.com/v1/projects/ubc-supermileage-telemetry-v2:runQuery?prettyPrint=true&alt=json",{method:"POST",headers:{Authorization:"Bearer "+a.token,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.state.current?{query:{filter:{propertyFilter:{op:"GREATER_THAN_OR_EQUAL",property:{name:"published_at"},value:{stringValue:a.state.startTime.toISOString()}}},kind:[{name:"ParticleEvent"}],projection:[{property:{name:"data"}},{property:{name:"published_at"}}]}}:{query:{filter:{compositeFilter:{filters:[{propertyFilter:{op:"GREATER_THAN_OR_EQUAL",property:{name:"published_at"},value:{stringValue:a.state.startTime.toISOString()}}},{propertyFilter:{op:"LESS_THAN_OR_EQUAL",property:{name:"published_at"},value:{stringValue:a.state.endTime.toISOString()}}}],op:"AND"}},kind:[{name:"ParticleEvent"}],projection:[{property:{name:"data"}},{property:{name:"published_at"}}]}})}).then(function(e){return e.json().then(function(e){var t=[],r=[],o=0;if("entityResults"in e.batch){e.batch.entityResults.forEach(function(e){t.push(parseInt(e.entity.properties.data.stringValue)),r.push(o),o++});var s=a.state.graph.datasets[0],i=Object(n.a)({},s);i.data=t,a.setState({graph:{labels:r,datasets:[i]}})}console.log("Results:"),console.log(t),console.log(r),console.log(e.batch.entityResults),console.log(e)})})},a.responseGoogle=function(e){a.setState({loggedIn:!0}),console.log(e),a.token=e.accessToken},a.responseFail=function(e){console.log(e),console.log("Failed")},a.buttonInit=function(){return p.a.createElement("span",{className:"updateButton"},p.a.createElement("button",{onClick:a.getData},"Update"))},a.state={startTime:new Date,endTime:new Date,current:!1,loggedIn:!1,graph:v,animations:!0},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.state.loggedIn?p.a.createElement("div",null,p.a.createElement("div",{className:"header"},p.a.createElement(S,{startVal:this.state.startTime,endVal:this.state.endTime,onChangeStart:this.handleChangeStart,onChangeEnd:this.handleChangeEnd}),p.a.createElement("label",{className:"toggle"},p.a.createElement(b.a,{defaultChecked:this.state.current,onChange:this.handleCurrent})),this.state.current?"":this.buttonInit()),p.a.createElement(C,{data:this.state.graph,animations:this.state.animations})):p.a.createElement("div",{className:"login"},p.a.createElement(E.a,{clientId:"617338661646-v92ol8vhd4nl44vpntkv4jpjbq5hahmo.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseFail}))}}]),t}(p.a.Component),C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).render=function(){return p.a.createElement("div",null,p.a.createElement(h.a,{data:a.props.data,options:{animation:!!a.props.animations&&{duration:500}}}))},a.val=1,a}return Object(l.a)(t,e),t}(p.a.Component),S=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{id:"pickers"}," Start "," ",p.a.createElement(m.a,{selected:this.props.startVal,selectsStart:!0,showTimeSelect:!0,timeIntervals:2,startDate:this.props.startVal,endDate:this.props.endVal,onChange:this.props.onChangeStart,dateFormat:"MMMM d h:mm:ss aa"})," End ",p.a.createElement(m.a,{selected:this.props.endVal,placeholderText:"Current",selectsEnd:!0,showTimeSelect:!0,timeIntervals:2,startDate:this.props.startVal,endDate:this.props.endVal,onChange:this.props.onChangeEnd,dateFormat:"MMMM d h:mm:ss aa"}))}}]),t}(p.a.Component);u.a.render(p.a.createElement(y,null),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.e9e65101.chunk.js.map